(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}})();const Ke=!1,Ye=(e,n)=>e===n,M=Symbol("solid-proxy"),re=Symbol("solid-track"),H={equals:Ye};let Ce=je;const C=1,K=2,Me={owned:null,cleanups:null,context:null,owner:null};var d=null;let te=null,qe=null,m=null,v=null,A=null,ee=0;function oe(e,n){const t=m,r=d,o=e.length===0,i=n===void 0?r:n,s=o?Me:{owned:null,cleanups:null,context:i?i.context:null,owner:i},l=o?e:()=>e(()=>$(()=>U(s)));d=s,m=null;try{return L(l,!0)}finally{m=t,d=r}}function De(e,n){n=n?Object.assign({},H,n):H;const t={value:e,observers:null,observerSlots:null,comparator:n.equals||void 0},r=o=>(typeof o=="function"&&(o=o(t.value)),Pe(t,o));return[Ne.bind(t),r]}function _(e,n,t){const r=ae(e,n,!1,C);z(r)}function We(e,n,t){Ce=rn;const r=ae(e,n,!1,C);r.user=!0,A?A.push(r):z(r)}function S(e,n,t){t=t?Object.assign({},H,t):H;const r=ae(e,n,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=t.equals||void 0,z(r),Ne.bind(r)}function Xe(e){return L(e,!1)}function $(e){if(m===null)return e();const n=m;m=null;try{return e()}finally{m=n}}function Qe(e){We(()=>$(e))}function Te(e){return d===null||(d.cleanups===null?d.cleanups=[e]:d.cleanups.push(e)),e}function ie(){return m}function Ze(e,n){const t=Symbol("context");return{id:t,Provider:sn(t),defaultValue:e}}function Je(e){let n;return d&&d.context&&(n=d.context[e.id])!==void 0?n:e.defaultValue}function en(e){const n=S(e),t=S(()=>se(n()));return t.toArray=()=>{const r=t();return Array.isArray(r)?r:r!=null?[r]:[]},t}function Ne(){if(this.sources&&this.state)if(this.state===C)z(this);else{const e=v;v=null,L(()=>q(this),!1),v=e}if(m){const e=this.observers?this.observers.length:0;m.sources?(m.sources.push(this),m.sourceSlots.push(e)):(m.sources=[this],m.sourceSlots=[e]),this.observers?(this.observers.push(m),this.observerSlots.push(m.sources.length-1)):(this.observers=[m],this.observerSlots=[m.sources.length-1])}return this.value}function Pe(e,n,t){let r=e.value;return(!e.comparator||!e.comparator(r,n))&&(e.value=n,e.observers&&e.observers.length&&L(()=>{for(let o=0;o<e.observers.length;o+=1){const i=e.observers[o],s=te&&te.running;s&&te.disposed.has(i),(s?!i.tState:!i.state)&&(i.pure?v.push(i):A.push(i),i.observers&&Le(i)),s||(i.state=C)}if(v.length>1e6)throw v=[],new Error},!1)),n}function z(e){if(!e.fn)return;U(e);const n=ee;nn(e,e.value,n)}function nn(e,n,t){let r;const o=d,i=m;m=d=e;try{r=e.fn(n)}catch(s){return e.pure&&(e.state=C,e.owned&&e.owned.forEach(U),e.owned=null),e.updatedAt=t+1,Re(s)}finally{m=i,d=o}(!e.updatedAt||e.updatedAt<=t)&&(e.updatedAt!=null&&"observers"in e?Pe(e,r):e.value=r,e.updatedAt=t)}function ae(e,n,t,r=C,o){const i={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:n,owner:d,context:d?d.context:null,pure:t};return d===null||d!==Me&&(d.owned?d.owned.push(i):d.owned=[i]),i}function Y(e){if(e.state===0)return;if(e.state===K)return q(e);if(e.suspense&&$(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ee);)e.state&&n.push(e);for(let t=n.length-1;t>=0;t--)if(e=n[t],e.state===C)z(e);else if(e.state===K){const r=v;v=null,L(()=>q(e,n[0]),!1),v=r}}function L(e,n){if(v)return e();let t=!1;n||(v=[]),A?t=!0:A=[],ee++;try{const r=e();return tn(t),r}catch(r){t||(A=null),v=null,Re(r)}}function tn(e){if(v&&(je(v),v=null),e)return;const n=A;A=null,n.length&&L(()=>Ce(n),!1)}function je(e){for(let n=0;n<e.length;n++)Y(e[n])}function rn(e){let n,t=0;for(n=0;n<e.length;n++){const r=e[n];r.user?e[t++]=r:Y(r)}for(n=0;n<t;n++)Y(e[n])}function q(e,n){e.state=0;for(let t=0;t<e.sources.length;t+=1){const r=e.sources[t];if(r.sources){const o=r.state;o===C?r!==n&&(!r.updatedAt||r.updatedAt<ee)&&Y(r):o===K&&q(r,n)}}}function Le(e){for(let n=0;n<e.observers.length;n+=1){const t=e.observers[n];t.state||(t.state=K,t.pure?v.push(t):A.push(t),t.observers&&Le(t))}}function U(e){let n;if(e.sources)for(;e.sources.length;){const t=e.sources.pop(),r=e.sourceSlots.pop(),o=t.observers;if(o&&o.length){const i=o.pop(),s=t.observerSlots.pop();r<o.length&&(i.sourceSlots[s]=r,o[r]=i,t.observerSlots[r]=s)}}if(e.tOwned){for(n=e.tOwned.length-1;n>=0;n--)U(e.tOwned[n]);delete e.tOwned}if(e.owned){for(n=e.owned.length-1;n>=0;n--)U(e.owned[n]);e.owned=null}if(e.cleanups){for(n=e.cleanups.length-1;n>=0;n--)e.cleanups[n]();e.cleanups=null}e.state=0}function on(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Re(e,n=d){throw on(e)}function se(e){if(typeof e=="function"&&!e.length)return se(e());if(Array.isArray(e)){const n=[];for(let t=0;t<e.length;t++){const r=se(e[t]);Array.isArray(r)?n.push.apply(n,r):n.push(r)}return n}return e}function sn(e,n){return function(r){let o;return _(()=>o=$(()=>(d.context={...d.context,[e]:r.value},en(()=>r.children))),void 0),o}}const _e=Symbol("fallback");function xe(e){for(let n=0;n<e.length;n++)e[n]()}function ln(e,n,t={}){let r=[],o=[],i=[],s=[],l=0,u;return Te(()=>xe(i)),()=>{const c=e()||[],f=c.length;return c[re],$(()=>{if(f===0)return l!==0&&(xe(i),i=[],r=[],o=[],l=0,s=[]),t.fallback&&(r=[_e],o[0]=oe(p=>(i[0]=p,t.fallback())),l=1),o;for(r[0]===_e&&(i[0](),i=[],r=[],o=[],l=0),u=0;u<f;u++)u<r.length&&r[u]!==c[u]?s[u](()=>c[u]):u>=r.length&&(o[u]=oe(y));for(;u<r.length;u++)i[u]();return l=s.length=i.length=f,r=c.slice(0),o=o.slice(0,l)});function y(p){i[u]=p;const[a,b]=De(c[u]);return s[u]=b,n(a,u)}}}function g(e,n){return $(()=>e(n||{}))}const un=e=>`Stale read from <${e}>.`;function k(e){const n="fallback"in e&&{fallback:()=>e.fallback};return S(ln(()=>e.each,e.children,n||void 0))}function P(e){const n=e.keyed,t=S(()=>e.when,void 0,void 0),r=n?t:S(t,void 0,{equals:(o,i)=>!o==!i});return S(()=>{const o=r();if(o){const i=e.children;return typeof i=="function"&&i.length>0?$(()=>i(n?o:()=>{if(!$(r))throw un("Show");return t()})):i}return e.fallback},void 0,void 0)}const Ee=e=>S(()=>e());function cn(e,n,t){let r=t.length,o=n.length,i=r,s=0,l=0,u=n[o-1].nextSibling,c=null;for(;s<o||l<i;){if(n[s]===t[l]){s++,l++;continue}for(;n[o-1]===t[i-1];)o--,i--;if(o===s){const f=i<r?l?t[l-1].nextSibling:t[i-l]:u;for(;l<i;)e.insertBefore(t[l++],f)}else if(i===l)for(;s<o;)(!c||!c.has(n[s]))&&n[s].remove(),s++;else if(n[s]===t[i-1]&&t[l]===n[o-1]){const f=n[--o].nextSibling;e.insertBefore(t[l++],n[s++].nextSibling),e.insertBefore(t[--i],f),n[o]=t[i]}else{if(!c){c=new Map;let y=l;for(;y<i;)c.set(t[y],y++)}const f=c.get(n[s]);if(f!=null)if(l<f&&f<i){let y=s,p=1,a;for(;++y<o&&y<i&&!((a=c.get(n[y]))==null||a!==f+p);)p++;if(p>f-l){const b=n[s];for(;l<f;)e.insertBefore(t[l++],b)}else e.replaceChild(t[l++],n[s++])}else s++;else n[s++].remove()}}}const we="_$DX_DELEGATE";function an(e,n,t,r={}){let o;return oe(i=>{o=i,n===document?e():h(n,e(),n.firstChild?null:void 0,t)},r.owner),()=>{o(),n.textContent=""}}function E(e,n,t,r){let o;const i=()=>{const l=document.createElement("template");return l.innerHTML=e,l.content.firstChild},s=()=>(o||(o=i())).cloneNode(!0);return s.cloneNode=s,s}function fn(e,n=window.document){const t=n[we]||(n[we]=new Set);for(let r=0,o=e.length;r<o;r++){const i=e[r];t.has(i)||(t.add(i),n.addEventListener(i,dn))}}function Ae(e,n,t){t==null?e.removeAttribute(n):e.setAttribute(n,t)}function x(e,n){n==null?e.removeAttribute("class"):e.className=n}function h(e,n,t,r){if(t!==void 0&&!r&&(r=[]),typeof n!="function")return W(e,n,r,t);_(o=>W(e,n(),o,t),r)}function dn(e){let n=e.target;const t=`$$${e.type}`,r=e.target,o=e.currentTarget,i=u=>Object.defineProperty(e,"target",{configurable:!0,value:u}),s=()=>{const u=n[t];if(u&&!n.disabled){const c=n[`${t}Data`];if(c!==void 0?u.call(n,c,e):u.call(n,e),e.cancelBubble)return}return n.host&&typeof n.host!="string"&&!n.host._$host&&n.contains(e.target)&&i(n.host),!0},l=()=>{for(;s()&&(n=n._$host||n.parentNode||n.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}}),e.composedPath){const u=e.composedPath();i(u[0]);for(let c=0;c<u.length-2&&(n=u[c],!!s());c++){if(n._$host){n=n._$host,l();break}if(n.parentNode===o)break}}else l();i(r)}function W(e,n,t,r,o){for(;typeof t=="function";)t=t();if(n===t)return t;const i=typeof n,s=r!==void 0;if(e=s&&t[0]&&t[0].parentNode||e,i==="string"||i==="number"){if(i==="number"&&(n=n.toString(),n===t))return t;if(s){let l=t[0];l&&l.nodeType===3?l.data!==n&&(l.data=n):l=document.createTextNode(n),t=D(e,t,r,l)}else t!==""&&typeof t=="string"?t=e.firstChild.data=n:t=e.textContent=n}else if(n==null||i==="boolean")t=D(e,t,r);else{if(i==="function")return _(()=>{let l=n();for(;typeof l=="function";)l=l();t=W(e,l,t,r)}),()=>t;if(Array.isArray(n)){const l=[],u=t&&Array.isArray(t);if(le(l,n,t,o))return _(()=>t=W(e,l,t,r,!0)),()=>t;if(l.length===0){if(t=D(e,t,r),s)return t}else u?t.length===0?Se(e,l,r):cn(e,t,l):(t&&D(e),Se(e,l));t=l}else if(n.nodeType){if(Array.isArray(t)){if(s)return t=D(e,t,r,n);D(e,t,null,n)}else t==null||t===""||!e.firstChild?e.appendChild(n):e.replaceChild(n,e.firstChild);t=n}}return t}function le(e,n,t,r){let o=!1;for(let i=0,s=n.length;i<s;i++){let l=n[i],u=t&&t[e.length],c;if(!(l==null||l===!0||l===!1))if((c=typeof l)=="object"&&l.nodeType)e.push(l);else if(Array.isArray(l))o=le(e,l,u)||o;else if(c==="function")if(r){for(;typeof l=="function";)l=l();o=le(e,Array.isArray(l)?l:[l],Array.isArray(u)?u:[u])||o}else e.push(l),o=!0;else{const f=String(l);u&&u.nodeType===3&&u.data===f?e.push(u):e.push(document.createTextNode(f))}}return o}function Se(e,n,t=null){for(let r=0,o=n.length;r<o;r++)e.insertBefore(n[r],t)}function D(e,n,t,r){if(t===void 0)return e.textContent="";const o=r||document.createTextNode("");if(n.length){let i=!1;for(let s=n.length-1;s>=0;s--){const l=n[s];if(o!==l){const u=l.parentNode===e;!i&&!s?u?e.replaceChild(o,l):e.insertBefore(o,t):u&&l.remove()}else i=!0}}else e.insertBefore(o,t);return[o]}const hn="_App_zjf8h_1",mn="_main_container_zjf8h_9",yn="_header_zjf8h_44",gn="_actions_zjf8h_51",vn="_encounter_zjf8h_61",pn="_inventory_zjf8h_65",bn="_logs_zjf8h_71",_n="_stats_zjf8h_80",O={App:hn,main_container:mn,header:yn,actions:gn,encounter:vn,inventory:pn,logs:bn,stats:_n},ue=Symbol("store-raw"),j=Symbol("store-node"),w=Symbol("store-has"),ke=Symbol("store-self");function Ue(e){let n=e[M];if(!n&&(Object.defineProperty(e,M,{value:n=new Proxy(e,wn)}),!Array.isArray(e))){const t=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let o=0,i=t.length;o<i;o++){const s=t[o];r[s].get&&Object.defineProperty(e,s,{enumerable:r[s].enumerable,get:r[s].get.bind(n)})}}return n}function X(e){let n;return e!=null&&typeof e=="object"&&(e[M]||!(n=Object.getPrototypeOf(e))||n===Object.prototype||Array.isArray(e))}function V(e,n=new Set){let t,r,o,i;if(t=e!=null&&e[ue])return t;if(!X(e)||n.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):n.add(e);for(let s=0,l=e.length;s<l;s++)o=e[s],(r=V(o,n))!==o&&(e[s]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):n.add(e);const s=Object.keys(e),l=Object.getOwnPropertyDescriptors(e);for(let u=0,c=s.length;u<c;u++)i=s[u],!l[i].get&&(o=e[i],(r=V(o,n))!==o&&(e[i]=r))}return e}function Q(e,n){let t=e[n];return t||Object.defineProperty(e,n,{value:t=Object.create(null)}),t}function F(e,n,t){if(e[n])return e[n];const[r,o]=De(t,{equals:!1,internal:!0});return r.$=o,e[n]=r}function xn(e,n){const t=Reflect.getOwnPropertyDescriptor(e,n);return!t||t.get||!t.configurable||n===M||n===j||(delete t.value,delete t.writable,t.get=()=>e[M][n]),t}function Ve(e){ie()&&F(Q(e,j),ke)()}function En(e){return Ve(e),Reflect.ownKeys(e)}const wn={get(e,n,t){if(n===ue)return e;if(n===M)return t;if(n===re)return Ve(e),t;const r=Q(e,j),o=r[n];let i=o?o():e[n];if(n===j||n===w||n==="__proto__")return i;if(!o){const s=Object.getOwnPropertyDescriptor(e,n);ie()&&(typeof i!="function"||e.hasOwnProperty(n))&&!(s&&s.get)&&(i=F(r,n,i)())}return X(i)?Ue(i):i},has(e,n){return n===ue||n===M||n===re||n===j||n===w||n==="__proto__"?!0:(ie()&&F(Q(e,w),n)(),n in e)},set(){return!0},deleteProperty(){return!0},ownKeys:En,getOwnPropertyDescriptor:xn};function Z(e,n,t,r=!1){if(!r&&e[n]===t)return;const o=e[n],i=e.length;t===void 0?(delete e[n],e[w]&&e[w][n]&&o!==void 0&&e[w][n].$()):(e[n]=t,e[w]&&e[w][n]&&o===void 0&&e[w][n].$());let s=Q(e,j),l;if((l=F(s,n,o))&&l.$(()=>t),Array.isArray(e)&&e.length!==i){for(let u=e.length;u<i;u++)(l=s[u])&&l.$();(l=F(s,"length",i))&&l.$(e.length)}(l=s[ke])&&l.$()}function Fe(e,n){const t=Object.keys(n);for(let r=0;r<t.length;r+=1){const o=t[r];Z(e,o,n[o])}}function An(e,n){if(typeof n=="function"&&(n=n(e)),n=V(n),Array.isArray(n)){if(e===n)return;let t=0,r=n.length;for(;t<r;t++){const o=n[t];e[t]!==o&&Z(e,t,o)}Z(e,"length",r)}else Fe(e,n)}function R(e,n,t=[]){let r,o=e;if(n.length>1){r=n.shift();const s=typeof r,l=Array.isArray(e);if(Array.isArray(r)){for(let u=0;u<r.length;u++)R(e,[r[u]].concat(n),t);return}else if(l&&s==="function"){for(let u=0;u<e.length;u++)r(e[u],u)&&R(e,[u].concat(n),t);return}else if(l&&s==="object"){const{from:u=0,to:c=e.length-1,by:f=1}=r;for(let y=u;y<=c;y+=f)R(e,[y].concat(n),t);return}else if(n.length>1){R(e[r],n,[r].concat(t));return}o=e[r],t=[r].concat(t)}let i=n[0];typeof i=="function"&&(i=i(o,t),i===o)||r===void 0&&i==null||(i=V(i),r===void 0||X(o)&&X(i)&&!Array.isArray(i)?Fe(o,i):Z(e,r,i))}function Sn(...[e,n]){const t=V(e||{}),r=Array.isArray(t),o=Ue(t);function i(...s){Xe(()=>{r&&s.length===1?An(t,s[0]):R(t,s)})}return[o,i]}const On=[{id:"days",name:"Days",type:"basic",category:"loop",baseValue:99,baseMax:100,description:"Days"},{id:"health",name:"Health",type:"stat",baseValue:5,baseMax:10,description:"Health"},{id:"mana",name:"Mana",type:"stat",baseValue:0,baseMax:0,description:"Mana"}],In=Object.freeze(Object.defineProperty({__proto__:null,RESOURCES:On},Symbol.toStringTag,{value:"Module"})),$n=[{id:"first",name:"Defend",type:"combat",category:"loop",order:"random",enemies:["slime"],numberOfEnemies:1,completionMessage:"You have defended",completionEffects:[{type:"increase_value",itemID:"mana_shard_0",amount:1},{type:"increase_value",resourceID:"days",amount:1}],failureMessage:"You have failed to defend",failureEffects:[{type:"increase_value",resourceID:"days",amount:1}]}],Cn=Object.freeze(Object.defineProperty({__proto__:null,ENCOUNTERS:$n},Symbol.toStringTag,{value:"Module"})),Mn=[{id:"slime",name:"Slime",health:5,description:"Slime",completionEffects:[{type:"increase_value",itemID:"mana_shard_0",amount:1,chance:.1}]}],Dn=Object.freeze(Object.defineProperty({__proto__:null,ENEMIES:Mn},Symbol.toStringTag,{value:"Module"})),Tn=[{id:"survive",name:"Survive",category:"common",description:"Run and hide to survive one more day.",effects:[{type:"increase_value",resourceID:"days",amount:1}],prerequisites:[{resourceID:"days",valueLessThanMax:!0}]},{id:"rest",name:"Rest",category:"common",description:"Rest and recover.",effects:[{type:"increase_value",resourceID:"health",amount:1},{type:"increase_value",resourceID:"days",amount:1}],prerequisites:[{resourceID:"days",valueLessThanMax:!0}]},{id:"awaken",name:"Awaken",category:"story",description:"Awaken",effects:[{type:"increase_max",resourceID:"mana",amount:1}],maxExecutions:1,prerequisites:[{resourceID:"mana",maxMax:0},{resourceID:"days",valueEqualToMax:!0}]},{id:"loop",name:"Loop",category:"loop",description:"Loop",effects:[],prerequisites:[{resourceID:"days",valueEqualToMax:!0},{resourceID:"mana",minMax:1}]},{id:"battle",name:"Battle",category:"loop",description:"Battle an enemy",effects:[{type:"start_encounter",encounterID:"first"}],prerequisites:[{resourceID:"days",valueLessThanMax:!0}]}],Nn=Object.freeze(Object.defineProperty({__proto__:null,ACTIONS:Tn},Symbol.toStringTag,{value:"Module"})),Pn=[{id:"mana_shard_0",name:"Mana Shard 0",description:"A shard of very low quality mana."},{id:"mana_shard_1",name:"Mana Shard 1",description:"A shard of low quality mana."},{id:"mana_shard_2",name:"Mana Shard 2",description:"A shard of medium quality mana."},{id:"mana_shard_3",name:"Mana Shard 3",description:"A shard of high quality mana."},{id:"mana_shard_4",name:"Mana Shard 4",description:"A shard of very high quality mana."},{id:"mana_shard_5",name:"Mana Shard 5",description:"A shard of superior quality mana."},{id:"mana_shard_6",name:"Mana Shard 6",description:"A shard of pure mana."}],jn=Object.freeze(Object.defineProperty({__proto__:null,ITEMS:Pn},Symbol.toStringTag,{value:"Module"})),Ln=[],fe=[],ze=[],Be=[],de=[],Rn=[In,Cn,Dn,Nn,jn];Rn.forEach(e=>{e.CATEGORIES&&Ln.push(...e.CATEGORIES),e.RESOURCES&&fe.push(...e.RESOURCES),e.ENCOUNTERS&&ze.push(...e.ENCOUNTERS),e.ENEMIES&&Be.push(...e.ENEMIES),e.ACTIONS&&de.push(...e.ACTIONS)});const kn=fe,T=fe.reduce((e,n)=>(e[n.id]=n,e),{}),ne=ze.reduce((e,n)=>(e[n.id]=n,e),{}),ce=Be.reduce((e,n)=>(e[n.id]=n,e),{}),Ge=de,N=de.reduce((e,n)=>(e[n.id]=n,e),{}),Un={count:0,resources:{},actions:{},items:{},encounter:null,logs:[]};function Oe(e,n,t){return Math.min(Math.max(e,n),t)}function Vn(){const[e,n]=Sn(Un),t={increment:()=>n("count",r=>r+1),decrement:()=>n("count",r=>r-1),initialize:r=>{kn.forEach(o=>{n("resources",o.id,{visible:r.computeVisibility(o.id),value:o.baseValue,max:o.baseMax})}),Ge.forEach(o=>{n("actions",o.id,{visible:r.computeVisibility(o.id),executions:0})})},computeVisibility:r=>{const o=Fn(e,r);return r in T&&n("resources",r,{visible:o}),r in N&&n("actions",r,{visible:o}),o},computeEnabled:r=>J(e,r),applyEffects:function(r){r.forEach(o=>{t.applyEffect(o)})},applyEffect:function(r){zn(e,n,t,r)},doAction:r=>{Bn(e,n,t,r)},addLog:r=>{n("logs",o=>[...o,r])},runEncounter:r=>{qn(e,n,t,r)}};return[e,t]}function Fn(e,n){if(n in T){let t=!1;return n in e.resources&&(t=e.resources[n].visible),t||J(e,n)}if(n in N){let t=!1;return n in e.actions&&(t=e.actions[n].visible),t||J(e,n)}return!1}function J(e,n){let t=[];n in N&&(t=N[n].prerequisites);let r=!1;return!t||t.length===0?r=!0:r=t.every(o=>{if(o.resourceID){const i=e.resources[o.resourceID];if(!i||o.minValue!==void 0&&i.value<o.minValue||o.maxValue!==void 0&&i.value>o.maxValue||o.minMax!==void 0&&i.max<o.minMax||o.maxMax!==void 0&&i.max>o.maxMax||o.valueLessThanMax&&i.value>=i.max||o.valueGreaterThanZero&&i.value<=0||o.valueEqualToMax&&i.value!==i.max)return!1}if(o.actionID){const i=e.actions[o.actionID];if(!i||(console.log("act state: visible ="+i.visible+", executions = "+i.executions),o.actionMinExecutions!==void 0&&i.executions<o.actionMinExecutions)||o.actionMaxExecutions!==void 0&&i.executions>o.actionMaxExecutions)return!1}return!0}),n in e.actions&&N[n].maxExecutions&&e.actions[n].executions>=N[n].maxExecutions&&(r=!1),r}function zn(e,n,t,r){switch(r.type){case"increase_value":if(console.log("increase_value"),r.resourceID){if(t.addLog("Increase value "+r.resourceID+" "+r.amount),r.chance!==void 0&&Math.random()>r.chance)return;n("resources",r.resourceID,l=>{const u=l||{value:0,max:0},c=Oe(u.value+(r.amount||0),0,u.max);return{...u,value:c}})}if(r.itemID){if(t.addLog("Increase value "+r.itemID+" "+r.amount),r.chance!==void 0&&Math.random()>r.chance)return;n("items",r.itemID,l=>{const u=l||{amount:0},c=u.amount+(r.amount||0);return{...u,amount:c}})}break;case"increase_max":console.log("increase_max"),r.resourceID&&(t.addLog("Increase max "+r.resourceID+" "+r.amount),n("resources",r.resourceID,l=>{console.log(l);const u=l||{value:0,max:0},c=u.max+(r.amount||0),f=Oe(u.value,0,c);return{...u,max:c,value:f}}));break;case"start_encounter":if(e.resources.health.value<=0){t.addLog("Cannot start encounter with 0 health.");return}t.addLog("Start encounter");const o=r.encounterID;if(!o){console.log("no encounter id found");return}const i=ne[o];if(console.log(i),!i){console.log("no encounter found");return}let s={encounterID:o,currentEnemyIndex:0,player:{delay:0},enemy:null};console.log(s),n("encounter",s);break}}function Bn(e,n,t,r){if(e.encounter!==null){t.addLog("Cannot perform another action while in an encounter.");return}if(e.actions[r.id]||n("actions",r.id,{executions:0}),r.maxExecutions&&e.actions[r.id].executions>=r.maxExecutions){console.log("Action already executed max times");return}if(!J(e,r.id)){console.log("Prerequisites not met");return}n("actions",r.id,o=>({...o,executions:o.executions+1})),t.applyEffects(r.effects)}function Gn(e){if(e.encounter===null)return!1;const n=ne[e.encounter.encounterID];return n?e.encounter.currentEnemyIndex>=n.numberOfEnemies:!1}function Hn(e){return e.encounter===null?!1:e.resources.health.value<=0}function Kn(e,n,t){if(e.encounter===null||e.encounter.enemy!==null)return;const r=ne[e.encounter.encounterID];if(!(!r||e.encounter.currentEnemyIndex>=r.numberOfEnemies)){if(r.order=="random"){const o=r.enemies[Math.floor(Math.random()*r.enemies.length)],i=ce[o];n("encounter","enemy",{id:i.id,health:i.health,maxHealth:i.health,delay:0}),t.addLog("Enemy spawned: "+i.name)}if(r.order=="sequential"){const o=r.enemies[e.encounter.currentEnemyIndex],i=ce[o];n("encounter","enemy",{id:i.id,health:i.health,maxHealth:i.health,delay:0})}}}function Yn(e,n){e.encounter!==null&&e.encounter.enemy&&e.encounter.enemy.health<=0&&(n("encounter","enemy",null),n("encounter","currentEnemyIndex",t=>t+1))}const G=2;function qn(e,n,t,r){if(e.encounter===null)return;Kn(e,n,t),n("encounter","player",s=>(console.log(s.delay+r),{...s,delay:s.delay+r})),n("encounter","enemy",s=>s?{...s,delay:s.delay+r}:null);let o=!0;o&&(o=!1,e.encounter.player.delay>=G&&e.encounter.enemy&&(n("encounter","enemy",s=>s?(o=!0,{...s,health:s.health-.1}):null),n("encounter","player",s=>({...s,delay:s.delay-G}))),Yn(e,n),e.encounter.enemy&&e.encounter.enemy.delay>=G&&(e.resources.health.value>0&&(o=!0,n("resources","health",s=>({...s,value:s.value-1}))),n("encounter","enemy",s=>s?{...s,delay:s.delay-G}:null)));const i=ne[e.encounter.encounterID];if(Gn(e)){t.applyEffects(i.completionEffects),i.completionEffects.some(s=>s.type==="start_encounter")||n("encounter",null),t.addLog("Encounter completed");return}if(Hn(e)){t.applyEffects(i.failureEffects),n("encounter",null),t.addLog("Encounter failed");return}}const He=Ze(void 0);function Wn(e){const n=Vn();return g(He.Provider,{value:n,get children(){return e.children}})}function B(){const e=Je(He);if(!e)throw new Error("useState must be used within a StateProvider");return e}function I(e){return e==null?0:+e.toFixed(2)}const Xn="_action_1igtl_1",Qn={action:Xn};var Zn=E("<button><div><hr>");const Jn=e=>{const[n,t]=B(),r=e.item;return g(P,{get when(){return t.computeVisibility(r().id)},get children(){var o=Zn(),i=o.firstChild,s=i.firstChild;return o.$$click=()=>t.doAction(r()),h(i,()=>r().name,s),h(i,()=>r().description,null),_(l=>{var u=Qn.action,c=!t.computeEnabled(r().id);return u!==l.e&&x(o,l.e=u),c!==l.t&&(o.disabled=l.t=c),l},{e:void 0,t:void 0}),o}})};fn(["click"]);const et="_encounter_1864d_1",nt={encounter:et};var tt=E("<div style=text-align:right><div><b></b></div><div> / </div><progress style=accent-color:red>"),rt=E('<div style="border:1px solid black;width:360px;margin:0 auto"><div style=text-align:left><div><b>Player</b></div><div> / </div><progress style=accent-color:red>'),ot=E("<div>No encounter active."),it=E("<div><b>Encounter");const st=()=>{const[e]=B();return(()=>{var n=it();return n.firstChild,h(n,g(P,{get when(){return e.encounter!==null},get children(){var t=rt(),r=t.firstChild,o=r.firstChild,i=o.nextSibling,s=i.firstChild,l=i.nextSibling;return h(t,g(P,{get when(){return e.encounter?.enemy},get children(){var u=tt(),c=u.firstChild,f=c.firstChild,y=c.nextSibling,p=y.firstChild,a=y.nextSibling;return h(f,()=>ce[e.encounter?.enemy?.id??""].name),h(y,()=>I(e.encounter?.enemy?.health),p),h(y,()=>I(e.encounter?.enemy?.maxHealth),null),_(()=>Ae(a,"max",e.encounter?.enemy?.maxHealth)),_(()=>a.value=e.encounter?.enemy?.health),u}}),r),h(i,()=>I(e.resources.health.value),s),h(i,()=>I(e.resources.health.max),null),_(()=>Ae(l,"max",e.resources.health.max)),_(()=>l.value=e.resources.health.value),t}}),null),h(n,g(P,{get when(){return e.encounter===null},get children(){return ot()}}),null),_(()=>x(n,nt.encounter)),n})()};var lt=E("<div><b>Inventory"),ut=E("<div>");const ct=()=>{const[e]=B(),n=S(()=>Object.entries(e.items));return(()=>{var t=lt();return t.firstChild,h(t,g(k,{get each(){return n()},children:(r,o)=>(()=>{var i=ut();return h(i,()=>r()[1].amount+" "+r()[1].id),i})()}),null),t})()},at="_log_content_4okfc_1",ft={log_content:at};var Ie=E("<div>");const dt=()=>{const[e]=B(),n=new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"});return(()=>{var t=Ie();return h(t,g(k,{get each(){return e.logs},children:(r,o)=>(()=>{var i=Ie();return h(i,()=>"["+n.format(Date.now())+"] "+r()),i})()})),_(()=>x(t,ft.log_content)),t})()};var ht=E("<div><header>Yet Another Regressor Idle</header><div><div><b>Actions</b></div><div></div><div></div><div></div><aside><b>Resources</b><br><b>Stats"),$e=E("<div>");const mt=()=>{const[e,n]=B();Qe(()=>{n.initialize(n);let r=Date.now()/1e3;const o=setInterval(()=>{let i=Date.now()/1e3;const s=i-r;r=i,n.runEncounter(s)},1e3);Te(()=>clearInterval(o))});const t=S(()=>Object.entries(e.resources));return(()=>{var r=ht(),o=r.firstChild,i=o.nextSibling,s=i.firstChild;s.firstChild;var l=s.nextSibling,u=l.nextSibling,c=u.nextSibling,f=c.nextSibling,y=f.firstChild,p=y.nextSibling;return p.nextSibling,h(s,g(k,{each:Ge,children:a=>g(Jn,{item:a})}),null),h(l,g(st,{})),h(u,g(ct,{})),h(c,g(dt,{})),h(f,g(k,{get each(){return t()},children:a=>g(P,{get when(){return Ee(()=>T[a()[0]].type==="basic")()&&a()[1].max>0},get children(){var b=$e();return h(b,()=>T[a()[0]].name+" "+I(a()[1].value)+" / "+I(a()[1].max)),b}})}),p),h(f,g(k,{get each(){return t()},children:a=>g(P,{get when(){return Ee(()=>T[a()[0]].type==="stat")()&&a()[1].max>0},get children(){var b=$e();return h(b,()=>T[a()[0]].name+" "+I(a()[1].value)+" / "+I(a()[1].max)),b}})}),null),_(a=>{var b=O.App,he=O.header,me=O.main_container,ye=O.actions,ge=O.encounter,ve=O.inventory,pe=O.logs,be=O.stats;return b!==a.e&&x(r,a.e=b),he!==a.t&&x(o,a.t=he),me!==a.a&&x(i,a.a=me),ye!==a.o&&x(s,a.o=ye),ge!==a.i&&x(l,a.i=ge),ve!==a.n&&x(u,a.n=ve),pe!==a.s&&x(c,a.s=pe),be!==a.h&&x(f,a.h=be),a},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),r})()},yt=document.getElementById("root");an(()=>g(Wn,{get children(){return g(mt,{})}}),yt);
